!function(e){e.fn.fileInput=function(i){var t=e.extend({fileList:!0,iconClass:null,imgPreview:!0,imgPreviewClass:null,imgPreviewSelector:null},i);function l(i){var l=e(this),r=l.closest(".tower-file"),n=r.find("label"),s=r.find(".tower-file-clear"),d=r.find(".tower-file-list").empty().hide(),f=r.find("img"),o=r.find(".tower-file-details");o.length||(r.append('<div class="tower-file-details"></div>'),o=r.find(".tower-file-details"));var c=l[0].files,h="";if(null!==t.iconClass&&t.iconClass.length>0&&(h='<span class="mdi mdi-upload"></span>'),1===c.length){var w=c[0];if(n.html(h+w.name),w.type.match("image.*")&&t.imgPreview&&(null===t.imgPreviewSelector||t.imgPreviewSelector.length<1))f.length||(o.append('<div class="tower-input-preview-container"><div class="tower-input-preview-wrapper"><img class="'+t.imgPreviewClass+'" /></div></div>'),f=r.find("img")),o.show(),a(w,f);else if(w.type.match("image.*")&&t.imgPreview&&null!==t.imgPreviewSelector&&t.imgPreviewSelector.length>0){if(!((f=e(t.imgPreviewSelector)).length>0&&f.is("img")))throw"The selected element must be a img";o.hide(),a(w,f)}else o.hide(),f.attr("src","").hide();s.attr("disabled",null)}else if(c.length>1){if(f.attr("src","").hide(),t.fileList){d.length||(o.append('<ul class="tower-file-list"></ul>'),d=r.find(".tower-file-list"));for(var g=0;g<c.length;g++)d.append("<li>"+c[g].name+"</li>");o.show(),d.show()}else d.hide();n.html(h+c.length+" Files Selected"),s.attr("disabled",null)}else o.hide(),f.attr("src","").hide(),n.html(n.data("default-text")),s.attr("disabled","")}function a(e,i){var t=new FileReader;t.onload=function(e){i.attr("src",t.result).show()},t.readAsDataURL(e)}function r(){var i=e(this).closest(".tower-file");i.find('input[type="file"]').val("");var l=i.find("label");l.html(l.data("default-text")),i.find(".tower-file-clear").attr("disabled",""),i.find(".tower-file-details").hide(),null!==t.imgPreviewSelector&&t.imgPreviewSelector.length>0&&e(t.imgPreviewSelector).attr("src","")}this.filter('input[type="file"]').each((function(){var i=e(this).closest(".tower-file"),t=i.find("label");t.length&&t.attr("data-default-text",t.html().trim());var a=i.find(".tower-file-clear");a.length&&(a.attr("disabled",""),a.on("click",r)),e(this).on("change",l)}))}}(jQuery);