!function(e){e.fn.fileInput=function(i){var t=e.extend({fileList:!0,iconClass:null,imgPreview:!0,imgPreviewClass:"",imgPreviewSelector:null},i);function l(i){var l=e(this),a=l.closest(".tower-file"),n=a.find("label"),s=a.find(".tower-file-clear"),d=a.find(".tower-file-list").empty().hide(),o=a.find(".tower-input-preview-container"),f=a.find("img"),h=a.find(".tower-file-details");h.length||(a.append('<div class="tower-file-details"></div>'),h=a.find(".tower-file-details"));var w=l[0].files,c="";if(null!==t.iconClass&&t.iconClass.length>0&&(c='<span class="mdi mdi-upload"></span>'),1===w.length){var g=w[0];if(n.html(c+g.name),g.type.match("image.*")&&t.imgPreview&&(null===t.imgPreviewSelector||t.imgPreviewSelector.length<1))f.length||(h.append('<div class="tower-input-preview-container"><div class="tower-input-preview-wrapper"><img alt="" /></div></div>'),f=a.find("img"),void 0!==t.imgPreviewClass&&t.imgPreviewClass.length>0&&f.addClass(t.imgPreviewClass)),h.show(),o.show(),r(g,f);else if(g.type.match("image.*")&&t.imgPreview&&null!==t.imgPreviewSelector&&t.imgPreviewSelector.length>0){if(!((f=e(t.imgPreviewSelector)).length>0&&f.is("img")))throw"The selected element must be a img";h.hide(),o.show(),r(g,f)}else h.hide(),f.attr("src","").hide();s.attr("disabled",null)}else if(w.length>1){if(f.attr("src","").hide(),t.fileList){d.length||(h.append('<ul class="tower-file-list"></ul>'),d=a.find(".tower-file-list"));for(var v=0;v<w.length;v++)d.append("<li>"+w[v].name+"</li>");h.show(),d.show(),o.hide()}else d.hide(),o.hide();n.html(c+w.length+" Files Selected"),s.attr("disabled",null)}else h.hide(),f.attr("src","").hide(),n.html(n.data("default-text")),s.attr("disabled","")}function r(e,i){var t=new FileReader;t.onload=function(e){i[0].onload=function(){this.height>this.width?i.addClass("tower-input-preview-portrait"):i.removeClass("tower-input-preview-portrait")},i.attr("src",t.result).show()},t.readAsDataURL(e)}function a(){var i=e(this).closest(".tower-file");i.find('input[type="file"]').val("");var l=i.find("label");l.html(l.data("default-text")),i.find(".tower-file-clear").attr("disabled",""),i.find(".tower-file-details").hide(),null!==t.imgPreviewSelector&&t.imgPreviewSelector.length>0&&e(t.imgPreviewSelector).attr("src","")}this.filter('input[type="file"]').each((function(){var i=e(this).closest(".tower-file"),t=i.find("label");t.length&&t.attr("data-default-text",t.html().trim());var r=i.find(".tower-file-clear");r.length&&(r.attr("disabled",""),r.on("click",a)),e(this).on("change",l)}))}}(jQuery);