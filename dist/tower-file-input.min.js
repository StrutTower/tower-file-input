!function(){this.twrFileInput=function(e,t){let l={showFileList:!0,showImgPreview:!0,iconClass:null,uploadIconHtml:null};function i(e){let t=e.currentTarget.settings,l=this.closest(".twr-file"),i=l.querySelector("label"),s=l.querySelector(".twr-file-clear");var n=l.querySelector(".twr-file-details"),d=l.querySelector(".twr-file-list"),r=l.querySelector("img"),a=l.querySelector(".twr-img-preview-container"),c=this.files;let o="";if(null!==t.uploadIconHtml&&t.uploadIconHtml.length>0?o=t.uploadIconHtml:null!==t.iconClass&&t.iconClass.length>0&&(o='<span class="'+t.iconClass+'"></span>'),1===c.length){var u=c[0];i.innerHTML=o+u.name,d.classList.add("hidden"),null!==s&&(s.disabled=!1),u.type.match("image.*")&&t.showImgPreview?(n.classList.remove("hidden"),a.classList.remove("hidden"),function(e,t){var l=new FileReader;l.onload=function(e){t.src=l.result},l.readAsDataURL(e)}(u,r)):(n.classList.add("hidden"),r.src="")}else if(c.length>1)if(r.src="",i.innerHTML=o+c.length+" Files Selected",null!==s&&(s.disabled=!1),t.showFileList){d.innerHTML="";for(let e=0;e<c.length;e++){let t=document.createElement("li");t.innerText=c[e].name,d.appendChild(t)}n.classList.remove("hidden"),d.classList.remove("hidden"),a.classList.add("hidden")}else n.classList.add("hidden"),d.classList.add("hidden"),a.classList.add("hidden");else r.src="",n.classList.add("hidden"),i.innerHTML=i.dataset.defaultHtml,null!==s&&(s.disabled=!0)}function s(){let e=this.closest(".twr-file"),t=e.querySelector("label"),l=e.querySelector('input[type="file"]');var i=e.querySelector(".twr-file-details");let s=e.querySelector(".twr-file-clear");var n=e.querySelector(".twr-img-preview-container");l.value="",t.innerHTML=t.dataset.defaultHtml,n.classList.add("hidden"),i.classList.add("hidden"),null!==s&&(s.disabled=!0)}this.element=e,this.settings=t&&"object"==typeof t?function(e,t){return Object.keys(t).forEach((l=>{t.hasOwnProperty(l)&&(e[l]=t[l])})),e}(l,t):l,this.init=function(){this.element.addEventListener("change",i),this.element.settings=this.settings;let e=this.element.closest(".twr-file");!function(e){var t=e.querySelector(".twr-file-details");null===t&&((t=document.createElement("div")).classList.add("twr-file-details"),t.classList.add("hidden"),e.appendChild(t));var l=e.querySelector("img"),i=e.querySelector(".twr-img-preview-container");null==l&&((l=document.createElement("img")).classList.add("twr-preview-img"),(i=document.createElement("div")).classList.add("twr-img-preview-container"),i.classList.add("hidden"),i.appendChild(l),t.appendChild(i));var s=e.querySelector(".twr-file-list");null===s&&((s=document.createElement("ul")).classList.add("twr-file-list"),t.appendChild(s))}(e);let t=e.querySelector("label");t.dataset.defaultHtml=t.innerHTML;let l=e.querySelector(".twr-file-clear");null!==l&&(l.disabled=!0,l.addEventListener("click",s))},this.init()}}();