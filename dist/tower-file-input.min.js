!function(e){e.fn.fileInput=function(i){var l=e.extend({fileList:!0,iconClass:null,imgPreview:!0,imgPreviewClass:null,imgPreviewSelector:null},i);function t(i){var t=e(this),n=t.closest(".tower-file"),r=n.find("label"),s=n.find(".tower-file-clear"),d=n.find(".tower-file-list").empty().hide(),f=n.find("img"),o=n.find(".tower-file-details");o.length||(n.append('<div class="tower-file-details"></div>'),o=n.find(".tower-file-details"));var c=t[0].files,h="";if(null!==l.iconClass&&l.iconClass.length>0&&(h='<span class="mdi mdi-upload"></span>'),1===c.length){var g=c[0];if(r.html(h+g.name),g.type.match("image.*")&&l.imgPreview&&(null===l.imgPreviewSelector||l.imgPreviewSelector.length<1))f.length||(o.append('<div class="tower-input-preview-container"><img class="'+l.imgPreviewClass+'" /></div>'),f=n.find("img")),o.show(),a(g,f);else if(g.type.match("image.*")&&l.imgPreview&&null!==l.imgPreviewSelector&&l.imgPreviewSelector.length>0){if(!((f=e(l.imgPreviewSelector)).length>0&&f.is("img")))throw"The selected element must be a img";o.hide(),a(g,f)}else o.hide(),f.attr("src","").hide();s.attr("disabled",null)}else if(c.length>1){if(f.attr("src","").hide(),l.fileList){d.length||(o.append('<ul class="tower-file-list"></ul>'),d=n.find(".tower-file-list"));for(var m=0;m<c.length;m++)d.append("<li>"+c[m].name+"</li>");o.show(),d.show()}else d.hide();r.html(h+c.length+" Files Selected"),s.attr("disabled",null)}else o.hide(),f.attr("src","").hide(),r.html(r.data("default-text")),s.attr("disabled","")}function a(e,i){var l=new FileReader;l.onload=function(e){i.attr("src",l.result).show()},l.readAsDataURL(e)}function n(){var i=e(this).closest(".tower-file");i.find('input[type="file"]').val("");var t=i.find("label");t.html(t.data("default-text")),i.find(".tower-file-clear").attr("disabled",""),i.find(".tower-file-details").hide(),null!==l.imgPreviewSelector&&l.imgPreviewSelector.length>0&&e(l.imgPreviewSelector).attr("src","")}this.filter('input[type="file"]').each((function(){var i=e(this).closest(".tower-file"),l=i.find("label");l.length&&l.attr("data-default-text",l.html().trim());var a=i.find(".tower-file-clear");a.length&&(a.attr("disabled",""),a.on("click",n)),e(this).on("change",t)}))}}(jQuery);